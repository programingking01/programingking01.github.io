<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>hlx的个人博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="c&#x2F;c++c enum(枚举)枚举是c语言的一种基本数据类型，用于定义一组具有离散值得常量，它可以让数据更简洁，更易读。枚举类型通常用于为程序中的一组相关的常量取名字，以便于程序的可读性和维护性。 定义一个枚举类型，需要使用 enum关键字，后面跟着枚举类型的名称，以及用大括号 {} 括起来的一组枚举常量。每个枚举常量可以用一个标识符来表示，也可以为它们指定一个整数值，如果没有指定，那么">
<meta property="og:type" content="website">
<meta property="og:title" content="hlx的个人博客">
<meta property="og:url" content="http://example.com/cc++.html">
<meta property="og:site_name" content="hlx的个人博客">
<meta property="og:description" content="c&#x2F;c++c enum(枚举)枚举是c语言的一种基本数据类型，用于定义一组具有离散值得常量，它可以让数据更简洁，更易读。枚举类型通常用于为程序中的一组相关的常量取名字，以便于程序的可读性和维护性。 定义一个枚举类型，需要使用 enum关键字，后面跟着枚举类型的名称，以及用大括号 {} 括起来的一组枚举常量。每个枚举常量可以用一个标识符来表示，也可以为它们指定一个整数值，如果没有指定，那么">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-09-05T07:21:17.218Z">
<meta property="article:modified_time" content="2024-09-05T07:21:17.218Z">
<meta property="article:author" content="hlx">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="hlx的个人博客" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">hlx的个人博客</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="page-" class="h-entry article article-type-page" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/cc++.html" class="article-date">
  <time class="dt-published" datetime="2024-09-05T07:21:17.218Z" itemprop="datePublished">2024-09-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="c-c"><a href="#c-c" class="headerlink" title="c&#x2F;c++"></a>c&#x2F;c++</h1><h2 id="c-enum-枚举"><a href="#c-enum-枚举" class="headerlink" title="c enum(枚举)"></a>c enum(枚举)</h2><p>枚举是c语言的一种基本数据类型，用于定义一组具有离散值得常量，它可以让数据更简洁，更易读。枚举类型通常用于为程序中的一组相关的常量取名字，以便于程序的可读性和维护性。</p>
<p>定义一个枚举类型，需要使用 <code>enum</code>关键字，后面跟着枚举类型的名称，以及用大括号 <strong>{}</strong> 括起来的一组枚举常量。每个枚举常量可以用一个标识符来表示，也可以为它们指定一个整数值，如果没有指定，那么默认从 <strong>0</strong> 开始递增。</p>
<p>枚举语法定义格式为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">enum　枚举名　&#123;枚举元素1,枚举元素2,……&#125;;</span><br></pre></td></tr></table></figure>

<p>接下来我们举个例子，比如：一星期有 7 天，如果不用枚举，我们需要使用 #define 来为每个整数定义一个别名：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#define MON 1</span><br><span class="line">#define TUe 2</span><br><span class="line">#define WED 3</span><br><span class="line">#define THU 4</span><br><span class="line">#define FRI 5</span><br><span class="line">#define SAT 6</span><br><span class="line">#define SUN 7</span><br></pre></td></tr></table></figure>



<p>这个看起来代码量就比较多，接下来我们看看使用枚举的方式：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">enum DAY</span><br><span class="line">&#123;</span><br><span class="line">      MON=1, TUE, WED, THU, FRI, SAT, SUN</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>这样看起来是不是更简洁了。</p>
<p><strong>注意：</strong>第一个枚举成员的默认值为整型的 0，后续枚举成员的值在前一个成员上加 1。我们在这个实例中把第一个枚举成员的值定义为 1，第二个就为 2，以此类推。</p>
<h3 id="枚举变量的定义"><a href="#枚举变量的定义" class="headerlink" title="枚举变量的定义"></a>枚举变量的定义</h3><p>前面我们只是声明了枚举类型，接下来我们看看如何定义枚举变量。</p>
<p>我们可以通过以下三种方式来定义枚举变量</p>
<p><strong>1、先定义枚举类型，再定义枚举变量</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">enum DAY</span><br><span class="line">&#123;</span><br><span class="line">      MON=1, TUE, WED, THU, FRI, SAT, SUN</span><br><span class="line">&#125;;</span><br><span class="line">enum DAY day;</span><br></pre></td></tr></table></figure>

<p><strong>2、定义枚举类型的同时定义枚举变量</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">enum DAY</span><br><span class="line">&#123;</span><br><span class="line">      MON=1, TUE, WED, THU, FRI, SAT, SUN</span><br><span class="line">&#125; day;</span><br></pre></td></tr></table></figure>

<p><strong>3、省略枚举名称，直接定义枚举变量</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">enum</span><br><span class="line">&#123;</span><br><span class="line">      MON=1, TUE, WED, THU, FRI, SAT, SUN</span><br><span class="line">&#125; day;</span><br></pre></td></tr></table></figure>



<p>一般直接用第三种</p>
<blockquote>
<p>在C 语言中，枚举类型是被当做 int 或者 unsigned int 类型来处理的，所以按照 C 语言规范是没有办法遍历枚举类型的。</p>
<p>不过在一些特殊的情况下，枚举类型必须连续是可以实现有条件的遍历。</p>
</blockquote>
<p>以下实例使用 for 来遍历枚举的元素：</p>
<h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><p>#include &lt;stdio.h&gt;  enum DAY {      MON&#x3D;1, TUE, WED, THU, FRI, SAT, SUN } day; int main() {    &#x2F;&#x2F; 遍历枚举元素    for (day &#x3D; MON; day &lt;&#x3D; SUN; day++) {        printf(“枚举元素：%d \n”, day);    } }</p>
<p>以上实例输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">枚举元素：1 </span><br><span class="line">枚举元素：2 </span><br><span class="line">枚举元素：3 </span><br><span class="line">枚举元素：4 </span><br><span class="line">枚举元素：5 </span><br><span class="line">枚举元素：6 </span><br><span class="line">枚举元素：7</span><br></pre></td></tr></table></figure>

<p>以下枚举类型不连续，这种枚举无法遍历。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">enum</span><br><span class="line">&#123;</span><br><span class="line">    ENUM_0,</span><br><span class="line">    ENUM_10 = 10,</span><br><span class="line">    ENUM_11</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>枚举在 switch 中的使用：</p>
<h2 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line"> </span><br><span class="line">    enum color &#123; red=1, green, blue &#125;;</span><br><span class="line"> </span><br><span class="line">    enum  color favorite_color;</span><br><span class="line"> </span><br><span class="line">    /* 用户输入数字来选择颜色 */</span><br><span class="line">    printf(&quot;请输入你喜欢的颜色: (1. red, 2. green, 3. blue): &quot;);</span><br><span class="line">    scanf(&quot;%u&quot;, &amp;favorite_color);</span><br><span class="line"> </span><br><span class="line">    /* 输出结果 */</span><br><span class="line">    switch (favorite_color)</span><br><span class="line">    &#123;</span><br><span class="line">    case red:</span><br><span class="line">        printf(&quot;你喜欢的颜色是红色&quot;);</span><br><span class="line">        break;</span><br><span class="line">    case green:</span><br><span class="line">        printf(&quot;你喜欢的颜色是绿色&quot;);</span><br><span class="line">        break;</span><br><span class="line">    case blue:</span><br><span class="line">        printf(&quot;你喜欢的颜色是蓝色&quot;);</span><br><span class="line">        break;</span><br><span class="line">    default:</span><br><span class="line">        printf(&quot;你没有选择你喜欢的颜色&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>以上实例输出结果为：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请输入你喜欢的颜色: (1. red, 2. green, 3. blue): 1</span><br><span class="line">你喜欢的颜色是红色</span><br></pre></td></tr></table></figure>



<h2 id="指针"><a href="#指针" class="headerlink" title="指针"></a>指针</h2><p>在 C 和 C++ 中，指针是一种非常强大但也相对复杂的概念。以下是对指针的详细解释：</p>
<h3 id="一、指针的概念"><a href="#一、指针的概念" class="headerlink" title="一、指针的概念"></a><strong>一、指针的概念</strong></h3><p>指针是一个变量，它存储的是另一个变量的内存地址。通过指针，可以间接访问和操作所指向的变量。</p>
<p>例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">int num = 10; </span><br><span class="line">int *ptr = &amp;num;</span><br></pre></td></tr></table></figure>

<p>这里，<code>ptr</code>是一个指向<code>int</code>类型变量的指针，它存储了变量<code>num</code>的地址。</p>
<h3 id="二、指针的类型"><a href="#二、指针的类型" class="headerlink" title="二、指针的类型"></a><strong>二、指针的类型</strong></h3><p>指针的类型决定了它可以指向哪种类型的变量。例如，<code>int *</code>类型的指针只能指向<code>int</code>类型的变量，<code>char *</code>类型的指针只能指向<code>char</code>类型的变量等。</p>
<h3 id="三、指针的操作"><a href="#三、指针的操作" class="headerlink" title="三、指针的操作"></a><strong>三、指针的操作</strong></h3><ol>
<li>取地址（&amp;）运算符：用于获取变量的地址。例如，<code>&amp;num</code>返回变量<code>num</code>的地址。</li>
<li>解引用（*）运算符：用于访问指针所指向的变量。例如，<code>*ptr</code>表示访问指针<code>ptr</code>所指向的变量。</li>
<li>指针的赋值：可以将一个指针赋值给另一个同类型的指针。例如，<code>int *ptr2 = ptr;</code>。</li>
<li>指针的算术运算：可以对指针进行加法和减法运算。指针加上或减去一个整数，实际上是在内存中向前或向后移动相应数量的字节，具体移动的字节数取决于指针所指向的类型的大小。例如，如果<code>ptr</code>是一个指向<code>int</code>类型的指针，<code>ptr + 1</code>将指向内存中的下一个<code>int</code>类型的变量。</li>
</ol>
<h3 id="四、指针的作用"><a href="#四、指针的作用" class="headerlink" title="四、指针的作用"></a><strong>四、指针的作用</strong></h3><h4 id="4-1动态内存分配："><a href="#4-1动态内存分配：" class="headerlink" title="4.1动态内存分配："></a>4.1动态内存分配：</h4><p>通过指针，可以在程序运行时动态地分配内存。例如，使用<code>malloc</code>或<code>new</code>函数可以在堆上分配内存，并返回一个指向分配的内存的指针。</p>
<p>在 C 和 C++ 中，<code>malloc</code>和<code>new</code>确实可以在堆上分配内存并返回指向分配内存的指针。</p>
<h5 id="一、C-语言中的malloc"><a href="#一、C-语言中的malloc" class="headerlink" title="一、C 语言中的malloc"></a><strong>一、C 语言中的<code>malloc</code></strong></h5><ol>
<li><pre><code>malloc
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">函数的原型是</span><br><span class="line"></span><br></pre></td></tr></table></figure>
void *malloc(size_t size)
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">，它接受一个参数，表示要分配的字节数，并返回一个指向分配的内存的指针，类型为</span><br><span class="line"></span><br></pre></td></tr></table></figure>
void *
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   ，可以通过类型转换将其转换为任何所需的指针类型。</span><br><span class="line"></span><br><span class="line">   - 例如：`int *ptr = (int *)malloc(sizeof(int));`，这里分配了足够存储一个整数的内存，并将指针转换为`int *`类型。</span><br><span class="line"></span><br><span class="line">2. 使用</span><br><span class="line"></span><br></pre></td></tr></table></figure>
malloc
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   分配的内存不会自动初始化。内存中的内容是未定义的，在使用之前可能需要进行初始化。</span><br><span class="line"></span><br><span class="line">   - 例如：`*ptr = 10;`，在使用指针之前，将整数 10 存储在分配的内存中。</span><br><span class="line"></span><br><span class="line">3. 当不再需要使用由</span><br><span class="line"></span><br></pre></td></tr></table></figure>
malloc
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">分配的内存时，必须使用</span><br><span class="line"></span><br></pre></td></tr></table></figure>
free
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   函数释放内存，以避免内存泄漏。</span><br><span class="line"></span><br><span class="line">   - 例如：`free(ptr);`，释放之前分配的内存。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### **二、C++ 中的`new`**</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">1. ```</span><br><span class="line">   new</span><br></pre></td></tr></table></figure>

运算符有多种用法。可以使用

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new</span><br></pre></td></tr></table></figure>

来分配单个对象、数组或动态分配内存并调用构造函数进行初始化。

- 例如：`int *ptr = new int;`，分配一个整数的内存，并调用默认构造函数进行初始化（如果有）。也可以使用`new int(10);`来初始化分配的整数为 10。
- 对于数组：`int *arr = new int[5];`，分配一个包含 5 个整数的数组。
</code></pre>
</li>
<li><p>与</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">malloc</span><br></pre></td></tr></table></figure>

<p>不同，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new</span><br></pre></td></tr></table></figure>

<p>在分配内存时会根据对象的类型自动调用适当的构造函数进行初始化。如果对象有构造函数参数，可以在</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new</span><br></pre></td></tr></table></figure>

<p>表达式中提供这些参数。</p>
<ul>
<li>例如：<code>class MyClass &#123; public: MyClass(int value) &#123; /*... */ &#125; &#125;; MyClass *obj = new MyClass(10);</code>，创建一个<code>MyClass</code>对象并初始化为值 10。</li>
</ul>
</li>
<li><p>当使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">new</span><br></pre></td></tr></table></figure>

<p>分配的对象不再需要时，应该使用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">delete[]</span><br></pre></td></tr></table></figure>

<p>来释放内存，具体取决于分配的是单个对象还是数组。</p>
<ul>
<li>例如：<code>delete ptr;</code>释放单个对象的内存。<code>delete[] arr;</code>释放数组的内存</li>
</ul>
</li>
</ol>
<h4 id="4-2函数参数传递："><a href="#4-2函数参数传递：" class="headerlink" title="4.2函数参数传递："></a>4.2函数参数传递：</h4><p>指针可以作为函数的参数传递，这样可以在函数内部修改外部变量的值。例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">increment</span><span class="params">(<span class="type">int</span> *num)</span> &#123;</span><br><span class="line">    (*num)++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">int</span> n = <span class="number">10</span>;</span><br><span class="line">    increment(&amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d\n&quot;</span>, n); <span class="comment">// 输出 11</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-3数组和指针的关系："><a href="#4-3数组和指针的关系：" class="headerlink" title="4.3数组和指针的关系："></a>4.3数组和指针的关系：</h4><p>在 C 和 C++ 中，数组名实际上是一个指向数组第一个元素的指针。例如，对于数组<code>int arr[5]</code>，<code>arr</code>和<code>&amp;arr[0]</code>是等价的，都表示指向数组第一个元素的指针。可以使用指针来遍历数组。例如：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span> *ptr = arr;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, *(ptr + i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="4-4数据结构："><a href="#4-4数据结构：" class="headerlink" title="4.4数据结构："></a>4.4数据结构：</h4><p>指针在实现各种数据结构（如链表、树、图等）中起着关键作用。通过指针，可以将不同的节点连接起来，构建复杂的数据结构。</p>
<h3 id="五、指针的注意事项"><a href="#五、指针的注意事项" class="headerlink" title="五、指针的注意事项"></a><strong>五、指针的注意事项</strong></h3><ol>
<li>空指针：指针可以被初始化为<code>NULL</code>（在 C++ 中是<code>nullptr</code>），表示它不指向任何有效的内存地址。在使用指针之前，应该检查它是否为<code>NULL</code>，以避免访问无效的内存地址。</li>
<li>内存泄漏：如果使用动态内存分配函数（如<code>malloc</code>或<code>new</code>）分配了内存，但在不再需要时没有释放，就会导致内存泄漏。应该在适当的时候使用<code>free</code>或<code>delete</code>函数释放动态分配的内存。</li>
<li>指针越界：访问指针所指向的内存范围之外的地址是危险的，可能会导致程序崩溃或产生不可预测的结果。在使用指针进行数组访问或其他操作时，要确保指针不越界。</li>
<li>指针的类型转换：在进行指针类型转换时要小心，确保转换是合法的并且不会导致错误的内存访问。</li>
</ol>
<p>指针是 C 和 C++ 中非常强大的工具，但也需要谨慎使用，以避免出现错误和安全问题。</p>
<h3 id="六-指针在-C-和-C-中有很多复杂的应用场景，以下是一些例子："><a href="#六-指针在-C-和-C-中有很多复杂的应用场景，以下是一些例子：" class="headerlink" title="六.指针在 C 和 C++ 中有很多复杂的应用场景，以下是一些例子："></a>六.指针在 C 和 C++ 中有很多复杂的应用场景，以下是一些例子：</h3><h4 id="一、指针与动态内存分配"><a href="#一、指针与动态内存分配" class="headerlink" title="一、指针与动态内存分配"></a><strong>一、指针与动态内存分配</strong></h4><ol>
<li><strong>动态数组</strong>：可以使用指针和动态内存分配来创建动态大小的数组。例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> n;</span><br><span class="line">std::cout &lt;&lt; <span class="string">&quot;Enter the size of the array: &quot;</span>;</span><br><span class="line">std::cin &gt;&gt; n;</span><br><span class="line"><span class="type">int</span>* arr = <span class="keyword">new</span> <span class="type">int</span>[n];</span><br><span class="line"><span class="comment">// 使用动态分配的数组</span></span><br><span class="line"><span class="keyword">delete</span>[] arr;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><strong>链表</strong>：链表是一种数据结构，其中每个节点包含一个值和一个指向下一个节点的指针。通过指针操作，可以方便地添加、删除和遍历链表节点。例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">ListNode</span> &#123;</span><br><span class="line">    <span class="type">int</span> value;</span><br><span class="line">    ListNode* next;</span><br><span class="line">    <span class="built_in">ListNode</span>(<span class="type">int</span> val) : <span class="built_in">value</span>(val), <span class="built_in">next</span>(<span class="literal">nullptr</span>) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">addNode</span><span class="params">(ListNode*&amp; head, <span class="type">int</span> val)</span> </span>&#123;</span><br><span class="line">    ListNode* newNode = <span class="keyword">new</span> <span class="built_in">ListNode</span>(val);</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        head = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        ListNode* current = head;</span><br><span class="line">        <span class="keyword">while</span> (current-&gt;next!= <span class="literal">nullptr</span>) &#123;</span><br><span class="line">            current = current-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">        current-&gt;next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">printList</span><span class="params">(ListNode* head)</span> </span>&#123;</span><br><span class="line">    ListNode* current = head;</span><br><span class="line">    <span class="keyword">while</span> (current!= <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        std::cout &lt;&lt; current-&gt;value &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">        current = current-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    ListNode* head = <span class="literal">nullptr</span>;</span><br><span class="line">    <span class="built_in">addNode</span>(head, <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">addNode</span>(head, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">addNode</span>(head, <span class="number">3</span>);</span><br><span class="line">    <span class="built_in">printList</span>(head);</span><br><span class="line">    <span class="comment">// 释放链表内存</span></span><br><span class="line">    <span class="keyword">while</span> (head!= <span class="literal">nullptr</span>) &#123;</span><br><span class="line">        ListNode* temp = head;</span><br><span class="line">        head = head-&gt;next;</span><br><span class="line">        <span class="keyword">delete</span> temp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="二、指针与函数参数"><a href="#二、指针与函数参数" class="headerlink" title="二、指针与函数参数"></a><strong>二、指针与函数参数</strong></h4><ol>
<li><strong>传递指针以修改参数值</strong>：通过传递指针作为函数参数，可以在函数内部修改外部变量的值。例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">increment</span><span class="params">(<span class="type">int</span>* num)</span> </span>&#123;</span><br><span class="line">    (*num)++;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> value = <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">increment</span>(&amp;value);</span><br><span class="line">    std::cout &lt;&lt; value &lt;&lt; std::endl; <span class="comment">// 输出 11</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><strong>指针作为函数返回值</strong>：函数可以返回一个指针，指向动态分配的内存或某个特定的变量。例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>* <span class="title">createArray</span><span class="params">(<span class="type">int</span> size)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span>* arr = <span class="keyword">new</span> <span class="type">int</span>[size];</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span>* myArray = <span class="built_in">createArray</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="comment">// 使用动态分配的数组</span></span><br><span class="line">    <span class="keyword">delete</span>[] myArray;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>在 C 和 C++ 中，<code>int *const a</code>、<code>const int *a</code>和<code>int const *a</code>这三种声明有不同的含义：</p>
<ol>
<li><pre><code>int *const a
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   ：</span><br><span class="line"></span><br><span class="line">   - 这声明了一个指向整数的常量指针。</span><br><span class="line">   - 意味着指针本身是常量，不能被重新赋值指向其他内存地址，但它所指向的整数可以被修改。</span><br><span class="line">   - 例如：</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">     int num1 = 10, num2 = 20;</span><br><span class="line">     int *const ptr = &amp;num1;</span><br><span class="line">     // *ptr = 30; // 可以修改所指向的整数的值</span><br><span class="line">     // ptr = &amp;num2; // 错误，不能重新赋值指针</span><br></pre></td></tr></table></figure>

</code></pre>
</li>
<li><pre><code>const int *a
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">和</span><br><span class="line"></span><br></pre></td></tr></table></figure>
int const *a
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">   ：这两种声明在语义上是完全相同的。</span><br><span class="line"></span><br><span class="line">   - 这声明了一个指向常量整数的指针。</span><br><span class="line">   - 意味着指针可以被重新赋值指向其他内存地址，但它所指向的整数不能被修改。</span><br><span class="line">   - 例如：</span><br><span class="line"></span><br><span class="line">```c++</span><br><span class="line">     int num1 = 10, num2 = 20;</span><br><span class="line">     const int *ptr = &amp;num1;</span><br><span class="line">     // ptr = &amp;num2; // 可以重新赋值指针</span><br><span class="line">     // *ptr = 30; // 错误，不能修改所指向的整数的值</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ol>
</li>
</ol>
<h4 id="三、指针与多维数组"><a href="#三、指针与多维数组" class="headerlink" title="三、指针与多维数组"></a><strong>三、指针与多维数组</strong></h4><ol>
<li><strong>二维数组的指针表示</strong>：在 C 和 C++ 中，二维数组可以用指针的指针来表示。例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">3</span>][<span class="number">4</span>] = &#123;</span><br><span class="line">    &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;,</span><br><span class="line">    &#123;<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>&#125;,</span><br><span class="line">    &#123;<span class="number">9</span>, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">int</span>(*ptr)[<span class="number">4</span>] = arr;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">3</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt; <span class="number">4</span>; j++) &#123;</span><br><span class="line">        std::cout &lt;&lt; (*ptr)[j] &lt;&lt; <span class="string">&quot; &quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ptr++;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><strong>动态分配多维数组</strong>：可以使用指针和动态内存分配来创建动态大小的多维数组。例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span>** <span class="title">createDynamic2DArray</span><span class="params">(<span class="type">int</span> rows, <span class="type">int</span> cols)</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span>** arr = <span class="keyword">new</span> <span class="type">int</span>*[rows];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">        arr[i] = <span class="keyword">new</span> <span class="type">int</span>[cols];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">deleteDynamic2DArray</span><span class="params">(<span class="type">int</span>** arr, <span class="type">int</span> rows)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; rows; i++) &#123;</span><br><span class="line">        <span class="keyword">delete</span>[] arr[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">delete</span>[] arr;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">int</span> rows = <span class="number">3</span>;</span><br><span class="line">    <span class="type">int</span> cols = <span class="number">4</span>;</span><br><span class="line">    <span class="type">int</span>** myArray = <span class="built_in">createDynamic2DArray</span>(rows, cols);</span><br><span class="line">    <span class="comment">// 使用动态分配的二维数组</span></span><br><span class="line">    <span class="built_in">deleteDynamic2DArray</span>(myArray, rows);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="四、指针与字符串"><a href="#四、指针与字符串" class="headerlink" title="四、指针与字符串"></a><strong>四、指针与字符串</strong></h4><ol>
<li><strong>字符指针与字符串字面量</strong>：在 C 和 C++ 中，字符串字面量实际上是一个以空字符结尾的字符数组，并且可以用字符指针来指向它。例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span>* str = <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">std::cout &lt;&lt; str &lt;&lt; std::endl;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li><strong>动态分配字符串</strong>：可以使用指针和动态内存分配来创建动态大小的字符串。例如：</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span>* <span class="title">readString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    std::cout &lt;&lt; <span class="string">&quot;Enter a string: &quot;</span>;</span><br><span class="line">    <span class="type">char</span> buffer[<span class="number">100</span>];</span><br><span class="line">    std::cin.<span class="built_in">getline</span>(buffer, <span class="number">100</span>);</span><br><span class="line">    <span class="type">int</span> len = std::<span class="built_in">strlen</span>(buffer);</span><br><span class="line">    <span class="type">char</span>* str = <span class="keyword">new</span> <span class="type">char</span>[len + <span class="number">1</span>];</span><br><span class="line">    std::<span class="built_in">strcpy</span>(str, buffer);</span><br><span class="line">    <span class="keyword">return</span> str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="type">char</span>* myString = <span class="built_in">readString</span>();</span><br><span class="line">    std::cout &lt;&lt; myString &lt;&lt; std::endl;</span><br><span class="line">    <span class="keyword">delete</span>[] myString;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>指针的复杂应用需要谨慎处理，以避免内存泄漏、指针越界和其他错误。在使用指针时，要确保正确地管理内存，并遵循良好的编程实践。</p>
<h3 id="七-指针常见错误"><a href="#七-指针常见错误" class="headerlink" title="七.指针常见错误"></a>七.指针常见错误</h3><p>在 C 和 C++ 中使用指针时，容易出现以下一些常见错误：</p>
<h4 id="一、未初始化指针"><a href="#一、未初始化指针" class="headerlink" title="一、未初始化指针"></a><strong>一、未初始化指针</strong></h4><p>如果一个指针没有被初始化就被使用，它可能指向任意的内存地址，这会导致不可预测的行为甚至程序崩溃。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* ptr;</span><br><span class="line">*ptr = <span class="number">10</span>; <span class="comment">// 错误，ptr 未初始化</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>未初始化的指针或者指向已经被释放内存的指针称为<code>野指针</code>，初始化指针赋值为空的指针为<code>空指针</code>，在 C 中，用 <code>NULL</code> 表示空指针，在 C++ 中，用 <code>nullptr</code> 表示空指针。</p>
</blockquote>
<h4 id="二、悬空指针"><a href="#二、悬空指针" class="headerlink" title="二、悬空指针"></a><strong>二、悬空指针</strong></h4><p>当一个指针所指向的内存被释放后，如果继续使用这个指针，就会产生悬空指针。这可能导致访问非法内存地址。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* ptr = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">delete</span>[] ptr;</span><br><span class="line"><span class="comment">// 以下代码可能导致错误，因为 ptr 成为悬空指针</span></span><br><span class="line">std::cout &lt;&lt; *ptr;</span><br></pre></td></tr></table></figure>



<h4 id="三、内存泄漏"><a href="#三、内存泄漏" class="headerlink" title="三、内存泄漏"></a><strong>三、内存泄漏</strong></h4><p>如果动态分配了内存但没有在不再需要时释放，就会导致内存泄漏。随着程序的运行，可能会耗尽系统内存。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* ptr = <span class="keyword">new</span> <span class="type">int</span>[<span class="number">10</span>];</span><br><span class="line"><span class="comment">// 没有释放 ptr 所指向的内存</span></span><br></pre></td></tr></table></figure>



<h4 id="四、指针越界访问"><a href="#四、指针越界访问" class="headerlink" title="四、指针越界访问"></a><strong>四、指针越界访问</strong></h4><p>如果通过指针访问超出所指向的数组或内存范围的地址，可能会导致错误的结果或程序崩溃。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> arr[<span class="number">5</span>] = &#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;;</span><br><span class="line"><span class="type">int</span>* ptr = arr;</span><br><span class="line"><span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">5</span>; i++) &#123; <span class="comment">// 错误，i 可能超出数组范围</span></span><br><span class="line">    std::cout &lt;&lt; ptr[i];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="五、错误的指针类型转换"><a href="#五、错误的指针类型转换" class="headerlink" title="五、错误的指针类型转换"></a><strong>五、错误的指针类型转换</strong></h4><p>进行不恰当的指针类型转换可能导致错误的内存访问。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">double</span>* ptr = <span class="built_in">reinterpret_cast</span>&lt;<span class="type">double</span>*&gt;(&amp;num);</span><br><span class="line"><span class="comment">// 错误的类型转换，可能导致不可预测的结果</span></span><br><span class="line">std::cout &lt;&lt; *ptr;</span><br></pre></td></tr></table></figure>



<h4 id="六、混淆指针和引用"><a href="#六、混淆指针和引用" class="headerlink" title="六、混淆指针和引用"></a><strong>六、混淆指针和引用</strong></h4><p>指针和引用在某些方面相似，但也有不同之处。混淆它们可能导致错误。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> num = <span class="number">10</span>;</span><br><span class="line"><span class="type">int</span>* ptr = &amp;num;</span><br><span class="line"><span class="type">int</span>&amp; ref = num;</span><br><span class="line">*ptr = <span class="number">20</span>;</span><br><span class="line">ref = <span class="number">30</span>;</span><br><span class="line"><span class="comment">// 可能错误地认为指针和引用完全相同的用法</span></span><br></pre></td></tr></table></figure>



<h4 id="七、忘记释放动态分配的内存（C-中使用new）"><a href="#七、忘记释放动态分配的内存（C-中使用new）" class="headerlink" title="七、忘记释放动态分配的内存（C++ 中使用new）"></a><strong>七、忘记释放动态分配的内存（C++ 中使用<code>new</code>）</strong></h4><p>在 C++ 中，如果使用<code>new</code>分配了内存，应该使用<code>delete</code>来释放。如果忘记释放，会导致内存泄漏。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span>* ptr = <span class="keyword">new</span> <span class="type">int</span>;</span><br><span class="line"><span class="comment">// 没有释放 ptr 所指向的内存</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/cc++.html" data-id="cm5aqnt6f0006qcda9eot2u87" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
    
  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    

  
    
  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 hlx<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>